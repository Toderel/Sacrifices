<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8">
  <title>Camera Diavolului</title>
  <link rel="stylesheet" href="../style.css">
  <style>
    .devil-room {
      max-width: 500px;
      margin: 40px auto;
      background: #1a0a1a;
      color: #ff2222;
      border-radius: 16px;
      box-shadow: 0 0 24px #900;
      padding: 32px;
      text-align: center;
      position: relative;
    }

    .devil-avatar {
      font-size: 64px;
      margin-bottom: 16px;
      animation: shake 1.2s infinite;
    }
    @keyframes shake {
      0% { transform: rotate(-2deg); }
      50% { transform: rotate(2deg); }
      100% { transform: rotate(-2deg); }
    }
    .challenge {
      font-size: 1.3em;
      margin: 24px 0;
      font-style: italic;
    }
    .devil-btn {
      background: #ff2222;
      color: #fff;
      border: none;
      border-radius: 8px;
      padding: 12px 32px;
      font-size: 1.1em;
      cursor: pointer;
      margin: 8px;
      transition: background 0.2s;
    }
    .devil-btn:hover {
      background: #900;
    }
    .back-link {
      position: absolute;
      top: 16px;
      left: 16px;
      color: #fff;
      text-decoration: underline;
      font-size: 1em;
    }
  </style>
</head>
<body>
  <div id="info-corner" style="position:fixed;top:18px;left:18px;z-index:20;background:#222;color:#0fa;padding:12px 18px;border-radius:12px;box-shadow:0 0 12px #000;font-size:17px;max-width:220px;">
    <div id="finger-display">Degete: <span id="finger-count">5</span> <span id="finger-emojis">☝️☝️☝️☝️☝️</span></div>
    <div id="credit-display">Credite: <span id="credit-count">1000</span></div>
  </div>
  <div class="devil-room">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
      <a class="back-link" href="index.html">⟵ Înapoi la Slots</a>
      <a class="back-link" href="blackjack.html">⟵ Înapoi la Blackjack</a>
    </div>
    <div class="devil-avatar">😈</div>
    <h2>Camera Diavolului</h2>
    <div class="challenge" id="devil-challenge"></div>
    <button class="devil-btn" onclick="acceptChallenge()">Acceptă provocarea</button>
    <button class="devil-btn" onclick="nextChallenge()">Altă provocare</button>
    <div id="devil-result" style="margin-top:24px;font-size:1.1em;"></div>
    <div style="margin-top:32px;display:flex;justify-content:center;gap:24px;">
      <a href="index.html" class="devil-btn">Slots</a>
      <a href="blackjack.html" class="devil-btn">Blackjack</a>
      <a href="adaugare-credite.html" class="devil-btn">Adaugare credite</a>
    </div>
  </div>
  <script>
    const challenges = [
      "Gabriela este la 2 KM de tine! Plateste 50 de credite pentru a te intalni cu ea",
      "Sacrifică-ți 3 degete pentru 3 rotiri cu 3x noroc ",
      "Sacrifică-ți un picior pentru a regenera 3 degete jumătate ",
      "Primești 10 rotiri gratuite dar pentru tot restul vieții tale la un moment din zi 5 secunde vei fi dezbrăcat complet",
      "Pierde 5 ani din viață pentru o zi cu dublu noroc!",
      "Renunță la 3 degete pentru 10 rotiri gratuite la slots!",
      "Sacrifică 100 credite pentru a primi 500!",
      "Dăruiește-ți sufletul pentru un jackpot garantat!",
      "Pierde 1 zi din viață pentru a vedea viitorul unei mâini la blackjack!",
      "Acceptă o provocare secretă pentru o recompensă misterioasă!"
    ];
    let current = Math.floor(Math.random() * challenges.length);
    function showChallenge() {
      document.getElementById('devil-challenge').textContent = challenges[current];
      document.getElementById('devil-result').textContent = '';
    }
    function nextChallenge() {
      current = (current + 1) % challenges.length;
      showChallenge();
    }
    function acceptChallenge() {
      let fingers = getFingers();
      let credits = getCredits();
      let msg = '';
      // Special handling pentru provocarea Gabriela
      const gabrielaText = "Gabriela este la 2 KM de tine! Plateste 50 de credite pentru a te intalni cu ea ";
      if (challenges[current] === gabrielaText) {
        if (credits >= 50) {
          credits -= 50;
          localStorage.setItem('credits', credits);
          msg = "Ai plătit 50 de credite. Gabriela te așteaptă!";
        } else {
          msg = "Nu ai suficiente credite pentru a o întâlni pe Gabriela.";
        }
      // Pactul cu 10 rotiri gratuite doar dacă acceptă provocarea exactă
      } else if (challenges[current].startsWith("Primești 10 rotiri gratuite")) {
        msg = "Ai primit 10 rotiri gratuite la slots! (Efect special: la un moment dat vei fi dezbrăcat 5 secunde în fiecare zi)";
        localStorage.setItem('freeSpins', '10');
      } else if (challenges[current].startsWith("Sacrifică-ți 3 degete")) {
        if (fingers < 3) {
          msg = "Nu ai suficiente degete pentru această provocare!";
        } else {
          fingers -= 3;
          localStorage.setItem('fingers', fingers);
          msg = "Ai sacrificat 3 degete! Primești 3 rotiri cu 3x noroc, dar toate vor fi ghinioniste la slots! (Activează efectul special la slots)";
        }
      } else if (challenges[current].startsWith("Sacrifică-ți un picior")) {
        fingers = Math.min(10, fingers + 4);
        localStorage.setItem('fingers', fingers);
        msg = "Ai sacrificat un picior! Ți s-au regenerat 4 degete. (Efect: după fiecare mână la blackjack, se regenerează 1 deget până la 4)";
      } else {
        msg = "Ai acceptat provocarea! Diavolul îți va acorda recompensa...";
      }
      updateInfoCorner();
      document.getElementById('devil-result').textContent = msg;
    }
    // Sincronizare degete și credite reale între camere
    function getFingers() {
      return parseInt(localStorage.getItem('fingers') || '10');
    }
    function getCredits() {
      return parseInt(localStorage.getItem('credits') || '10');
    }
    function updateInfoCorner() {
      const fingers = getFingers();
      const credits = getCredits();
      document.getElementById('finger-count').textContent = fingers;
      document.getElementById('finger-emojis').textContent = '☝️'.repeat(fingers);
      document.getElementById('credit-count').textContent = credits;
    }
    updateInfoCorner();
    showChallenge();

  </script>
</body>
</html>
